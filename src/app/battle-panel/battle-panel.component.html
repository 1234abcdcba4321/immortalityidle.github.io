<h3>
    <mat-icon tooltip="Monsters come out at night. You'll need to be strong enough to fight them off if you want to become an immortal.">fort</mat-icon>
    Battles
    <span class="rightAligned">
      <button *ngIf="!battleService.autoTroubleUnlocked" (click)="battleService.trouble()">Look for Trouble</button>
      <input *ngIf="battleService.autoTroubleUnlocked"  type="checkbox" (change)="autoTroubleChange($event)"
        id="autoTroubleCheckbox"  [checked]="battleService.autoTroubleEnabled"/>
      <label *ngIf="battleService.autoTroubleUnlocked" for="autoTroubleCheckbox">Look for Trouble</label>
    </span>
</h3>
<div class="battleContainer">
    <table>
      <ng-container *ngFor="let enemyStack of battleService.enemies">
        <tr>
          <td>
              <button *ngIf="battleService.currentEnemy !== enemyStack" (click)="battleService.fight(enemyStack)">Fight</button>
              <span *ngIf="battleService.currentEnemy === enemyStack">Fighting</span>
          </td>
          <td>{{enemyStack.enemy.name | titlecase}} {{(enemyStack.quantity > 1) ? "(" + enemyStack.quantity +")" : ""}}</td>
          <td class="health">
            <progress class="status-progress"
              [value]="enemyStack.enemy.health"
              [max]="enemyStack.enemy.maxHealth">
              <div></div>
            </progress>
          </td>
          <td tooltip="Accuracy"><mat-icon>manage_accounts</mat-icon>{{enemyStack.enemy.accuracy | percent}}</td>
          <td tooltip="Attack Power"><mat-icon>flare</mat-icon>{{enemyStack.enemy.attack}}</td>
          <td tooltip="Defense"><mat-icon>shield</mat-icon>{{enemyStack.enemy.defense}}</td>
        </tr>
      </ng-container>
    </table>
  </div>
